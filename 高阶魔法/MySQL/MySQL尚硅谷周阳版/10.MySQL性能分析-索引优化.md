# 索引优化

## 索引失效的情况

### 1、全职匹配我最爱

### 2、最佳左前缀法则

如果索引了多例，要遵守最左前缀法则。指的是查询从索引的最左前列开始并且**不跳过索引中的列**。

带头大哥不能死，中间兄弟不能断。火车跑得快，全靠头来带。

### 3、不再索引列上做任何操作（计算、函数、（自动 or 手动）类型转换），会导致索引失效而转向全表扫描

### 4、存储引擎不能使用索引中范围条件右边的列

### 5、尽量使用覆盖索引（只访问索引的查询（索引列和查询列一直）），减少 `select *`

### 6、mysql 在使用不等于（!= 或者 <>）的时候无法使用索引会导致全表扫描

### 7、`is null` ，` is not null `也无法使用索引

### 8、like 以通配符开头（'%abc...'）mysql 索引失效会变成全表扫描的操作

使用覆盖索引解决这个问题

### 9、字符串不加单引号索引失效

### 10、少用 or ，用它来连接时会索引失效

---

## 建议

### 第一部分

**定值、范围还是排序，一般order by是给个范围**

**group by 基本上都需要进行排序，会有临时表产生**

---

### 一般性建议

1. **对于单键索引，尽量选择针对当前query过滤性更好的索引**

2. **在选择组合索引的时候，当前Query中过滤性最好的字段在索引字段顺序中，位置越靠前越好。**

3. **在选择组合索引的时候，尽量选择可以能包含当前query中的where子句中更多字段的索引**

4. **尽可能通过分析统计信息和调整query的写法来达到选择合适索引的目的**