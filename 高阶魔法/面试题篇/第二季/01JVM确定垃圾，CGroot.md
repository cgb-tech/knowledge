## 一、JVM垃圾回收的时候如何确定垃圾？是否知道什么是GC Roots？

### 1.1 什么是垃圾

内存中不再被使用到的空间就是垃圾

### 1.2 要进行回收，如何判断一个对象是否可以被回收

#### 1.2.1 引用计数法 GC算法第一个(以不被使用)

#### 1.2.2 枚举根节点做可达性分析(根搜索路径)

![image-20200311204104037](C:\Users\888\AppData\Roaming\Typora\typora-user-images\image-20200311204104037.png)

所谓`GC Roots`或者说`tracing GC`的根集合 ==就是一组必须活跃的引用==

==基本思路就是通过一-系列名为"GCRoots"的对象作为起始点==，从这个被称为GCRoots的对象开始向下搜索，如果一个对象到GC Roots没有任何引用链相连时，则说明此"对象不可用。也即给定一个集合的引用作为根出发，通过引用关系遍历对象图，能被遍历到的(可到达的)对象就被判定为存活;没有被遍历到的就自然被判定为死亡。

- case

![image-20200311204624008](C:\Users\888\AppData\Roaming\Typora\typora-user-images\image-20200311204624008.png)

### 1.3 可以被当做GC Roots对象的

1. 虚拟机栈(栈帧中的局部变量区，也叫做局部变量表)中引用的对象
2. 方法区中的类静态属性引用的对象
3. 方法区中常量引用的对象
4. 本地方法栈中JNI（Native方法）引用的对象

