# 登录态

> 一些方案：
>
> 有些中小型互联网公司可能会采用用MySQL实现降级的功能，但是这是不靠谱的，如果redis都挂掉了，MySQL也不会承受的住这么大的流量的打击，所以建议优化`redis`节点，使用 `redis cluster`策略来保证高可用性和可扩展性

## 会话有效期

> - Tomcat默认为30m
>
> - 不与服务端发生交互的呆滞时间

## 会话续命

> - 触发操作延长生命周期
> - 延长到30m，而不是加30m

## 安全管理

> - url query string , get请求参数内
>
> - 自定义header内
>
> - 用安全传输的https
>
> - 自定义协议

# SSO单点登录

> 1. 同域名
> 2. 根域名相同子域名不同
> 3. 域名都不相同

## 1、同域名

> 如果是同域名的话，只需要集中式 token 管理（放置在 redis 中）即可

## 2、根域名相同子域名不同

> 设置浏览器中的两个参数即可回归至同域名状态
>
> 1. **httpOnly = false/true**
> 2. **domain = host**

## 3、域名不相同

![image-20200503163019836](C:\Users\888\AppData\Roaming\Typora\typora-user-images\image-20200503163019836.png)

