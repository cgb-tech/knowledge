## å•ä¾‹è®¾è®¡æ¨¡å¼

### 1.é¥¿æ±‰å¼ï¼ˆé™æ€å¸¸é‡ï¼‰ï¼ˆå¯ç”¨ï¼‰

1. æ„é€ å™¨ç§æœ‰åŒ–
2. ç±»çš„å†…éƒ¨åˆ›å»ºå¯¹è±¡
3. å‘å¤–æš´éœ²ä¸€ä¸ªé™æ€çš„å…¬å…±æ–¹æ³•

```java
class Singleton{
    //ä½¿ç”¨privateé˜²æ­¢new
    private Singleton(){
       
    }
    //ç±»çš„å†…éƒ¨åˆ›å»ºå¯¹è±¡
    private final static Singleton instance = new Singleton();
    //å‘å¤–æš´éœ²ä¸€ä¸ªé™æ€çš„å…¬å…±æ–¹æ³•
    public static Singleton getInstance(){
        return instance;
    }
}
```

ä¼˜ç¼ºç‚¹ï¼š

| ä¼˜ç‚¹ | å†™æ³•ç®€å•ï¼Œåœ¨ç±»è£…è½½çš„æ—¶å€™å®Œæˆå®ä¾‹åŒ–ï¼Œé¿å…äº†çº¿ç¨‹åŒæ­¥é—®é¢˜       |
| ---- | ------------------------------------------------------------ |
| ç¼ºç‚¹ | åœ¨ç±»è£…è½½çš„æ—¶å€™å°±å®Œæˆå®ä¾‹åŒ–ï¼Œæ²¡æœ‰è¾¾åˆ°lazy Loadingçš„æ•ˆæœï¼Œå¦‚æœä¸€ç›´æ²¡æœ‰ç”¨åˆ°ï¼Œä¼šé€ æˆå†…å­˜çš„æµªè´¹ |

æ— æ³•ä¿è¯æ˜¯è‡ªå·±è§¦å‘çš„é™æ€çš„æ–¹æ³•

###  2.é¥¿æ±‰å¼ï¼ˆé™æ€ä»£ç å—ï¼‰ï¼ˆå¯ç”¨ï¼‰

```java
class Singleton{
    //ä½¿ç”¨privateé˜²æ­¢new
    private Singleton(){
       
    }
    //ç±»çš„å†…éƒ¨åˆ›å»ºå¯¹è±¡
    private static Singleton instance;
    
    static{	//åœ¨é™æ€ä»£ç å—é‡Œåˆ›å»º
        instance = new Singleton();
    }
    
    //å‘å¤–æš´éœ²ä¸€ä¸ªé™æ€çš„å…¬å…±æ–¹æ³•
    public static Singleton getInstance(){
        return instance;
    }
}
```

ä¼˜ç¼ºç‚¹å’Œé™æ€å¸¸é‡ä¸€æ ·

### 3.æ‡’æ±‰å¼ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰

```java
class Singleton{
    //ç±»çš„å†…éƒ¨åˆ›å»ºå¯¹è±¡
    private static Singleton instance;
    //ä½¿ç”¨privateé˜²æ­¢new
    private Singleton(){

    }

    //ä½¿ç”¨çš„æ™‚å€™æ‰åˆ›å»ºå‡ºæ¥ æ‡’æ±‰å¼
    public static Singleton getInstance(){
        if(instance == null){
            instance = new Singleton();
        }
        return instance;
    }
}
```

| ä¼˜ç‚¹ | èµ·åˆ°äº†lazy Loadingçš„æ•ˆæœ                                     |
| ---- | ------------------------------------------------------------ |
| ç¼ºç‚¹ | åªèƒ½åœ¨å•çº¿ç¨‹ä¸‹ä½¿ç”¨ï¼Œåœ¨å¤šçº¿ç¨‹ä¸‹ï¼Œä¸€ä¸ªçº¿ç¨‹è¿›å…¥äº†ifè¯­å¥ä¸­ï¼Œæ²¡æ¥å¾—åŠæ‰§è¡Œå®Œï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä¹Ÿé€šè¿‡äº†è¿™ä¸ªåˆ¤æ–­è¯­å¥ï¼Œè¿™æ—¶å€™å°±ä¼šäº§ç”Ÿå¤šä¸ªå®ä¾‹ï¼Œæ‰€ä»¥åœ¨å¤šçº¿ç¨‹ä¸‹ä¸å¯ä»¥ä½¿ç”¨å’Œè¿™ä¸ªæ–¹å¼ |

### 4.æ‡’æ±‰å¼ï¼ˆçº¿ç¨‹å®‰å…¨ï¼ŒåŒæ­¥æ–¹æ³•ï¼‰

```java
class Singleton{
    //ç±»çš„å†…éƒ¨åˆ›å»ºå¯¹è±¡
    private static Singleton instance;
    //ä½¿ç”¨privateé˜²æ­¢new
    private Singleton(){ }

    //åŠ å…¥äº†åŒæ­¥ä»£ç ï¼Œè§£å†³çº¿ç¨‹ä¸å®‰å…¨é—®é¢˜
    public static synchronized Singleton getInstance(){
        if(instance == null){
            instance = new Singleton();
        }
        return instance;
    }
}
```

| ä¼˜ç‚¹ | è§£å†³äº†çº¿ç¨‹ä¸å®‰å…¨çš„é—®é¢˜                                       |
| ---- | ------------------------------------------------------------ |
| ç¼ºç‚¹ | æ•ˆç‡å¾ˆä½ï¼Œæ–¹æ³•åªéœ€è¦æ‰§è¡Œä¸€æ¬¡å°±å¯ä»¥äº†ï¼Œä½†æ˜¯ä½¿ç”¨è¿™ä¸ªæ–¹æ³•éœ€è¦æ‰§è¡Œå¾ˆå¤šæ¬¡ï¼Œéƒ½è¦è¿›è¡ŒåŒæ­¥ |

### 5.æ‡’æ±‰å¼ï¼ˆçº¿ç¨‹å®‰å…¨ï¼ŒåŒæ­¥ä»£ç å—ï¼‰

```java
class Singleton{
    //ç±»çš„å†…éƒ¨åˆ›å»ºå¯¹è±¡
    private static Singleton instance;
    //ä½¿ç”¨privateé˜²æ­¢new
    private Singleton(){ }

    public static Singleton getInstance(){
        if(instance == null){
            synchronized (Singleton.class){
                 instance = new Singleton();
            }
        }
        return instance;
    }
}
```

çº¿ç¨‹ä¸å®‰å…¨ï¼ˆæœ‰äººå†™ï¼‰ä¸å¯ä»¥å¯åˆ°çº¿ç¨‹åŒæ­¥çš„ä½œç”¨ï¼ˆ==é”™è¯¯==ï¼‰

### 6.åŒé‡æ£€æŸ¥ï¼ˆæ¨èä½¿ç”¨ï¼‰

```java
class Singleton{
    //volatileé˜²æ­¢æŒ‡ä»¤é‡æ’
    private static volatile Singleton instance;
    //ä½¿ç”¨privateé˜²æ­¢new
    private Singleton(){ }

    //åŒé‡æ£€æŸ¥,è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå®ç°äº†æ‡’åŠ è½½çš„æ–¹å¼
    public static Singleton getInstance(){
        if(instance == null){
            synchronized (Singleton.class){
                if(instance == null){
                     instance = new Singleton();
                }
            }
        }
        return instance;
    }
}
```

| ä¼˜ç‚¹ | Double-Checkå¤šçº¿ç¨‹ä¸­ç»å¸¸ä½¿ç”¨ï¼Œä¿è¯äº†çº¿ç¨‹çš„å®‰å…¨ï¼Œé¿å…é‡å¤çš„æ–¹æ³•åŒæ­¥ï¼Œå»¶è¿ŸåŠ è½½ï¼Œæ•ˆç‡è¾ƒé«˜ |
| ---- | ------------------------------------------------------------ |
| ç»“è®º | æ¨èä½¿ç”¨                                                     |

### 7.é™æ€å†…éƒ¨ç±»ï¼ˆæ¨èä½¿ç”¨ï¼‰

```java
class Singleton{
   
    //ä½¿ç”¨privateé˜²æ­¢new
    private Singleton(){ }

    //åŒé‡æ£€æŸ¥,è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå®ç°äº†æ‡’åŠ è½½çš„æ–¹å¼
    public static SingletonInstance{
       private static final Stingleton INSTANCE = new Singleton();
    }
    public static Singleton getInstance(){
       return SingletonInstance.INSTANCE;
    }
}
```

å®ç°äº†çº¿ç¨‹å®‰å…¨ï¼Œä½¿ç”¨å»¶è¿ŸåŠ è½½ï¼ˆå¾ˆå¥½çš„ä¸€ç§æ¨¡å¼ï¼‰ï¼Œæ•ˆç‡é«˜

é™æ€å†…éƒ¨ç±»è£…è½½çš„æ—¶å€™æ˜¯å®‰å…¨çš„

### 8.æšä¸¾(æ¨èä½¿ç”¨)

```java
enum Singleton{
    INSTANCE;
    public void say(){
        System.out.println("ok");
    }
}
```

å€ŸåŠ©JDK1.5çš„æšä¸¾æ¥å®ç°ï¼Œé¿å…å¤šçº¿ç¨‹åŒæ­¥é—®é¢˜ï¼Œè¿˜èƒ½é˜²æ­¢ååºåˆ—åŒ–é‡æ–°åˆ›å»ºæ–°çš„å¯¹è±¡

æ˜¯Josh Blochæå€¡çš„æ–¹å¼





### 9.å•ä¾‹æ¨¡å¼åœ¨Runtimeä½¿ç”¨

ğŸŒ°Runtime:

```java
public class Runtime {
    private static Runtime currentRuntime = new Runtime();

    /**
     * Returns the runtime object associated with the current Java application.
     * Most of the methods of class <code>Runtime</code> are instance
     * methods and must be invoked with respect to the current runtime object.
     *
     * @return  the <code>Runtime</code> object associated with the current
     *          Java application.
     */
    public static Runtime getRuntime() {
        return currentRuntime;
    }

    /** Don't let anyone else instantiate this class */
    private Runtime() {}

```



### 10.å•ä¾‹æ¨¡å¼æ³¨æ„äº‹é¡¹

- å•ä¾‹æ¨¡å¼ä¿è¯äº†ç³»ç»Ÿå†…å­˜ä¸­è¯¥ç±»åªå­˜åœ¨ä¸€ä¸ªå¯¹è±¡ï¼ŒèŠ‚çœäº†ç³»ç»Ÿèµ„æºï¼Œå¯¹äºä¸€äº›éœ€è¦é¢‘ç¹åˆ›å»ºé”€æ¯çš„å¯¹è±¡ï¼Œä½¿ç”¨å•ä¾‹æ¨¡å¼å¯ä»¥æé«˜ç³»ç»Ÿæ€§èƒ½
- å½“æƒ³å®ä¾‹åŒ–ä¸€ä¸ªå•ä¾‹ç±»çš„æ—¶å€™ï¼Œå¿…é¡»è¦è®°ä½ä½¿ç”¨ç›¸åº”çš„è·å–å¯¹è±¡çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯ç”¨new
- å•ä¾‹æ¨¡å¼ä½¿ç”¨çš„åœºæ™¯ï¼š
  - éœ€è¦é¢‘ç¹çš„è¿›è¡Œåˆ›å»ºå’Œé”€æ¯çš„å¯¹è±¡
  - åˆ›å»ºå¯¹è±¡æ—¶è€—æ—¶è¿‡å¤šæˆ–è€—è´¹èµ„æºè¿‡å¤šï¼ˆé‡é‡çº§å¯¹è±¡ï¼‰ä½†åˆç»å¸¸ä½¿ç”¨åˆ°çš„å¯¹è±¡ã€å·¥å…·ç±»å¯¹è±¡ã€é¢‘ç¹è®¿é—®æ•°æ®åº“æˆ–æ–‡ä»¶çš„å¯¹è±¡ï¼ˆæ¯”å¦‚æ•°æ®æºã€sessionå·¥å‚ï¼‰





















































## 